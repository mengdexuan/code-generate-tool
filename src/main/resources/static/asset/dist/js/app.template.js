angular.module('app').run(['$templateCache', function($templateCache) {
  'use strict';

  $templateCache.put('asset/tpl/authorize_dept.html',
    "<div class=m-c><div class=modal-header><div class=\"pull-right col-md-6 no-padder\"><div class=input-group><input class=form-control ng-model=condition placeholder=搜索:名称/拼音><div class=input-group-btn><button type=button class=\"btn btn-default\" ng-show=condition ng-click=clear();><i class=\"glyphicon glyphicon-remove\"></i></button> <button type=button class=\"btn btn-default\" ng-click=search();><i class=\"glyphicon glyphicon-search\"></i></button></div></div></div><h4 class=modal-title style=\"line-height: 34px\"><i class=\"fa fa-users\"></i> 添加部门</h4></div><div class=\"modal-body no-padder\"><div class=permission-user-body ng-show=!searching><div class=\"col-sm-6 permission-user-part b-r wrapper-sm\"><hc-tree tree-control=tree load-asyn=true open-folder-icon=\"fa fa-users\" folder-icon=\"fa fa-users\" leaf-icon=\"fa fa-users\" on-node-dbl-click=select(node); on-selection-change=onSelectionChange(selection); load-url=/organization/department/list></hc-tree></div><div class=\"col-sm-6 permission-user-part wrapper-sm\"><div class=\"wrapper-xl text-center\" ng-show=loading><img src=asset/img/loading.gif><p class=m-t-sm>正在加载</p></div><div ng-repeat=\"dept in depts\" class=\"wrapper-xs hover-bg\" ng-show=!loading ng-click=select(dept);><i class=\"fa fa-users\"></i> <span class=m-l-sm>{{dept.name}}</span></div></div></div><div class=\"permission-user-body wrapper-sm\" ng-show=searching><div class=\"col-md-4 wrapper-sm hover-bg\" ng-repeat=\"dept in result\" ng-click=select(dept);><i class=\"fa fa-users\" style=font-size:20px></i> <span>{{dept.name}}</span></div><div class=col-sm-12 ng-show=\"result.length == 0\"><div class=\"wrapper-xs text-center\"><img ng-src=\"{{'asset/img/user_empty.png' | resource}}\"><p class=m-t-sm>没有搜索到部门</p></div></div><div class=\"col-sm-12 permission-user-part\" ng-show=loading><div class=\"wrapper-xl text-center\"><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div></div></div><div class=\"wrapper-sm b-t row m-l-none m-r-none\" ng-hide=\"selected.length == 0\"><div class=\"permission-dept-selected wrapper-sm text-left col-sm-3 hover-bg text-ellipsis\" ng-repeat=\"dept in selected\" ng-click=remove(dept)><button type=button class=close ng-click=remove(dept)><span aria-hidden=true>×</span></button> <i class=\"fa fa-users\"></i> {{dept.name}}</div></div></div><div class=modal-footer><form class=\"form-inline inline\"><div class=input-group><span class=input-group-addon>权限</span><select class=\"form-control wrapper-xs\" ng-model=permission><option ng-repeat=\"permission in permissions\" value={{permission.id}}>{{permission.name}}</option></select></div></form><button type=button class=\"btn btn-primary\" ng-click=ok() style=\"margin-left: 5px\" ng-disabled=\"selected.length == 0 || !permission || saving\"><span ng-show=!saving>提交</span> <span ng-show=saving>正在提交</span></button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/authorize_public.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title>设置权限</h4></div><div class=\"modal-body wrapper-lg\"><div class=row><div class=col-sm-12><form name=permissionSetForm class=\"form-horizontal form-validation\"><div class=form-group><label class=\"col-sm-3 control-label\">选择权限：</label><div class=col-sm-9><select class=\"form-control wrapper-xs\" ng-model=permission><option value=\"\">所有权限</option><option ng-repeat=\"permission in permissions\" value={{permission.id}} ng-selected=\"permission.id == permission\">{{permission.name}}</option></select></div><div class=col-sm-12><div class=\"alert alert-info m-b-none m-t-sm\">该文件夹所有成员可见，如果没有设置权限则全员可见</div></div></div></form></div></div></div><div class=modal-footer style=\"text-align: right\"><button type=button class=\"btn btn-primary\" ng-click=ok() style=\"margin-left: 5px\" ng-disabled=\"!permissionSetForm.$dirty || saving\"><span ng-show=!saving>提交</span> <span ng-show=saving>正在提交</span></button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/authorize_user.html',
    "<div class=m-c><div class=modal-header><div class=\"pull-right col-md-6 no-padder\"><div class=input-group><input class=form-control ng-model=condition placeholder=搜索:用户名/姓名/拼音><div class=input-group-btn><button type=button class=\"btn btn-default\" ng-show=condition ng-click=clear();><i class=\"glyphicon glyphicon-remove\"></i></button> <button type=button class=\"btn btn-default\" ng-click=search();><i class=\"glyphicon glyphicon-search\"></i></button></div></div></div><h4 class=modal-title style=\"line-height: 34px\"><i class=\"fa fa-user\"></i> 添加用户</h4></div><div class=\"modal-body no-padder\"><div class=permission-user-body ng-show=!searching><div class=\"col-sm-6 permission-user-part b-r wrapper-sm\"><hc-tree tree-control=tree load-asyn=true on-init=onTreeInit() open-folder-icon=\"fa fa-users\" folder-icon=\"fa fa-users\" leaf-icon=\"fa fa-users\" on-selection-change=loadUser(selection); load-url=/organization/department/list></hc-tree></div><div class=\"col-sm-6 permission-user-part wrapper-sm\"><div class=\"wrapper-xl text-center\" ng-show=loading><img src=asset/img/loading.gif><p class=m-t-sm>正在加载</p></div><div ng-repeat=\"user in users\" class=\"wrapper-xs hover-bg\" ng-show=!loading ng-click=select(user);><img ng-src=\"{{user.avatar | resource}}\" class=img-circle style=height:30px alt=...> <span class=m-l-sm style=\"line-height: 30px\">{{user.name}}</span></div></div></div><div class=\"permission-user-body wrapper-sm\" ng-show=searching><div class=\"col-md-4 wrapper-xs hover-bg\" ng-repeat=\"user in result\" ng-click=select(user);><img ng-src=\"{{user.avatar | resource}}\" class=\"img-circle pull-left\" style=height:50px alt=...><div class=inline><span class=m-l-sm style=\"line-height: 30px\">{{user.name}}</span><br><span class=m-l-sm style=\"line-height: 20px;font-size:12px;color:#bbb\">{{user.department.name}}</span></div></div><div class=col-sm-12 ng-show=\"result.length == 0\"><div class=\"wrapper-xs text-center\"><img ng-src=\"{{'asset/img/user_empty.png' | resource}}\"><p class=m-t-sm>没有搜索到用户</p></div></div><div class=\"col-sm-12 permission-user-part\" ng-show=loading><div class=\"wrapper-xl text-center\"><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div></div></div><div class=\"wrapper-sm b-t\" ng-hide=\"selected.length == 0\"><div class=\"permission-user-selected wrapper-sm text-center inline hover-bg\" ng-repeat=\"user in selected\"><button type=button class=close ng-click=remove(user)><span aria-hidden=true>×</span></button> <img ng-src=\"{{user.avatar | resource}}\" class=img-circle style=height:35px alt=...><div class=\"text-ellipsis m-t-xs\" style=\"font-size: 12px\">{{user.name}}</div></div></div></div><div class=modal-footer><form class=\"form-inline inline\"><div class=input-group><span class=input-group-addon>权限</span><select class=\"form-control wrapper-xs\" ng-model=permission><option ng-repeat=\"permission in permissions\" value={{permission.id}}>{{permission.name}}</option></select></div></form><button type=button class=\"btn btn-primary\" ng-click=ok() style=\"margin-left: 5px\" ng-disabled=\"selected.length == 0 || !permission || saving\"><span ng-show=!saving>提交</span> <span ng-show=saving>正在提交</span></button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/authorize.html',
    "<div class=m-c><div class=modal-header><div class=\"pull-right col-sm-6 no-padder\"><div class=input-group><input class=form-control ng-model=condition.name placeholder=搜索><div class=input-group-btn dropdown is-open=isopen><button type=button class=\"btn btn-default dropdown-toggle\" dropdown-toggle><span ng-if=!condition.permission>全部</span> <span ng-if=condition.permission>{{condition.permission.name}}</span> <span class=caret></span></button><ul class=\"dropdown-menu dropdown-menu-right\"><li ng-click=changeConditionPermission()><a href=#>全部</a></li><li ng-click=changeConditionPermission(permission) ng-repeat=\"permission in permissions\"><a href=#>{{permission.name}}</a></li></ul></div></div></div><h4 class=modal-title style=\"line-height: 34px\"><i class=\"fa fa-lock\"></i> 权限设置</h4></div><div class=\"modal-body no-padder\"><div class=\"permission-body wrapper-xs\" ng-click=\"pageNumber = null\"><div class=\"row m-n\"><div class=\"col-md-4 permission-item wrapper-sm hover-bg\" ng-class=\"{'active':pageNumber == authorize}\" ng-repeat=\"authorize in authorizes | filter:{name:condition.name,permission:condition.permission.id,type:'dept'}\" ng-click=select(authorize,$event)><button type=button class=close ng-click=remove(authorize,$event)><span aria-hidden=true>×</span></button> <i class=\"fa fa-users\" class=pull-left style=\"font-size:36.5px;margin-top: 2px\"></i><div class=inline><div class=m-l-sm style=\"line-height: 25px\">{{authorize.name}}</div><div class=m-l-sm style=\"line-height: 10px;font-size:12px;color:#bbb\">{{permissionMap[authorize.permission]}}</div></div></div></div><div class=\"row m-r-none m-l-none m-t-xs\"><div class=\"col-md-4 permission-item wrapper-sm hover-bg\" ng-class=\"{'active':pageNumber == authorize}\" ng-repeat=\"authorize in authorizes | filter:{name:condition.name,permission:condition.permission.id,type:'user'} \" ng-click=select(authorize,$event)><button type=button class=close ng-click=remove(authorize,$event)><span aria-hidden=true>×</span></button> <img ng-src=\"{{user.avatar | resource}}\" class=\"img-circle pull-left\" style=height:40px alt=...><div class=inline><div class=m-l-sm style=\"line-height: 25px\">{{authorize.name}}</div><div class=m-l-sm style=\"line-height: 10px;font-size:12px;color:#bbb\">{{permissionMap[authorize.permission]}}</div></div></div></div><div class=\"col-sm-12 permission-user-part\" ng-show=loading><div class=\"wrapper-xl text-center\"><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div></div><div class=col-sm-12 ng-show=\"permissions.length == 0\"><div class=\"wrapper-xs text-center\"><img ng-src=\"{{'asset/img/user_empty.png' | resource}}\" style=\"height: 200px\"><p class=m-t-sm>没有配置权限</p></div></div></div><div class=\"modal-footer text-left\"><div class=\"col-sm-4 no-padder\"><div class=input-group><span class=input-group-addon>权限</span><select class=\"form-control wrapper-xs\" ng-model=pageNumber.permission ng-change=update(pageNumber) ng-disabled=!pageNumber><option ng-repeat=\"(k,v) in permissionMap\" value={{k}} ng-selected=\"k == pageNumber.permission\">{{v}}</option></select></div></div><div class=pull-right><button class=\"btn btn-primary\" ng-click=addUser()><i class=\"fa fa-user\"></i> 添加用户</button> <button class=\"btn btn-primary\" ng-click=addDept()><i class=\"fa fa-users\"></i> 添加部门</button> <button class=\"btn btn-default\" ng-click=close()>关闭</button></div></div></div></div>"
  );


  $templateCache.put('asset/tpl/change_password.html',
    "<div class=app-ctrl style=\"padding-top:76px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-md bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header h3\"><i class=\"fa fa-key\"></i> 修改密码</span></div></div></div><div class=\"bg-light wrapper-xl lter app-inner\"><form name=form class=w-xl action=\"\" method=post style=\"margin: 0 auto\"><div ng-show=user.changePassword class=\"alert alert-warning alert-dismissable\">您的密码为不安全的密码，系统强制要求修改</div><div ng-show=success class=\"alert alert-success alert-dismissable\">密码修改成功，下次登录使用新密码登录</div><div ng-show=cause class=\"alert alert-danger alert-dismissable\">密码修改失败：{{cause}}</div><div class=\"input-group-icon m-b\"><i class=\"glyphicon glyphicon-lock input-icon\"></i> <input type=password name=oldPassword ng-model=oldPassword class=form-control placeholder=旧密码 required autofocus></div><div class=\"input-group-icon m-b\"><i class=\"glyphicon glyphicon-lock input-icon\"></i> <input type=password name=password ng-model=password class=form-control ng-change=check() ng-model-options=\"{updateOn: 'blur'}\" placeholder=新密码 required> <span class=\"help-block m-b-none text-xs text-danger\" ng-show=\"password.length < appConfig.minLengthOfPassword\">密码长度不能小于{{appConfig.minLengthOfPassword}}位</span> <span class=\"help-block m-b-none text-xs text-danger\" ng-show=\"strength < appConfig.passwordStrength\"><span ng-if=\"appConfig.passwordStrength == 2\">密码必须为数字和字母组合</span> <span ng-if=\"appConfig.passwordStrength == 3\">密码必须为数字和字母组合，且必须含有大小写字母</span> <span ng-if=\"appConfig.passwordStrength == 4\">密码必须为数字和字母组合，且必须含有大小写字母和特殊字符</span></span></div><div class=\"input-group-icon m-b\"><i class=\"glyphicon glyphicon-lock input-icon\"></i> <input type=password name=confirmPassword ng-model=confirmPassword ng-model-options=\"{updateOn: 'blur'}\" class=form-control placeholder=密码确认 required> <span ng-show=\"confirmPassword && confirmPassword != password\" class=\"help-block m-b-none text-xs text-danger\">两次密码不一致</span></div><div class=row style=\"margin-top: 8px\"><div class=\"col-xs-12 col-sm-12 col-md-12\"><button class=\"btn btn-primary btn-block\" ng-click=submit() type=button ng-disabled=\"strength < passwordStrength || form.$invalid || !form.$dirty || confirmPassword != password || password.length < appConfig.minLengthOfPassword\">确&nbsp;&nbsp;定</button></div></div></form></div></div>"
  );


  $templateCache.put('asset/tpl/copy.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title>复制文件(夹)</h4></div><div class=\"modal-body no-padder\"><div class=permission-user-body><div class=\"col-sm-12 permission-user-part b-r wrapper-sm\"><div class=wrapper-xs>选择要复制到的位置</div><hc-tree tree-control=tree load-asyn=true leaf-icon=\"fa fa-folder\" on-node-dbl-click=select(node); on-selection-change=setTarget(selection); on-before-load=setParam(node,params); load-url=fs/folder></hc-tree></div></div><div class=\"wrapper-sm b-t row m-l-none m-r-none\" ng-show=target><b>将复制到：</b><span>{{paths}}</span></div></div><div class=modal-footer><button type=button class=\"btn btn-primary\" ng-click=ok() ng-disabled=!target>确定</button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/directory_form.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title>新建文件夹</h4></div><div class=\"modal-body wrapper-lg\"><div class=row><div class=col-sm-12><form name=directoryForm class=\"form-horizontal form-validation\"><div class=form-group><label class=\"col-sm-2 control-label text-right\" style=padding-left:5px;padding-right:5px>名称：</label><div class=col-sm-10><input name=name ng-model=name required class=form-control></div></div><div class=\"line line-dashed b-b line-xs\" ng-show=allowPrivate();></div><div class=\"form-group m-b-none\" ng-show=allowPrivate();><label class=\"col-sm-2 control-label\" style=padding-left:5px;padding-right:5px>是否公开：</label><div class=col-sm-10><label class=\"checkbox-inline i-checks\"><input type=radio name=type value=public ng-model=type><i></i> 公开</label><label class=\"checkbox-inline i-checks\"><input type=radio name=type value=private ng-model=type><i></i> 不公开</label><div ng-show=\"type =='public'\" class=\"alert alert-info m-b-none m-t-sm\" role=alert>对所有成员可见</div><div ng-show=\"type == 'private'\" class=\"alert alert-info m-b-none m-t-sm\" role=alert>只对已授权的成员可见</div></div></div></form></div></div></div><div class=modal-footer style=\"text-align: right\"><button type=button class=\"btn btn-primary\" ng-click=ok() ng-disabled=\"(directoryForm.$invalid || !directoryForm.$dirty)\">确定</button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/directory.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-10 col-xs-10 padder-sm file-path\" ui-sref-active=active><a ng-if=\"context == 'enterprise'\" ui-sref='directory({mount:\"enterprise\",directory:\"root\"})'><i class=\"fa fa-users\"></i> <span>企业文档</span> <i ng-if=pageNumber class=\"fa fa-angle-right\"></i> </a><a ng-if=\"context == 'my'\" ui-sref='directory({mount:\"my\",directory:\"root\"})'><i class=\"fa fa-user\"></i> <span>我的文档</span> <i ng-if=pageNumber class=\"fa fa-angle-right\"></i> </a><a ng-repeat=\"path in paths\" ui-sref=directory({mount:context,directory:path.id})><i class=\"fa fa-folder\"></i> <span>{{path.name}}</span> <i class=\"fa fa-angle-right\"></i> </a><a ng-if=pageNumber><i class=\"fa fa-folder\"></i> <span>{{pageNumber.name}}</span> </a><span class=\"text-sm m-l-xs\" ng-show=\"files.length > 0\">( <span ng-show=\"selection.length > 0\">{{selection.length}} / </span>{{files.length}} )</span></div><div class=\"col-sm-2 col-xs-2 text-right\" style=\"padding-left: 0px;padding-right: 5px\"><div class=pull-right><button ng-if=\"mode == 'list'\" class=\"btn btn-md btn-default\" ng-click=switchMode() tooltip=切换到图标视图 tooltip-placement=bottom><i class=\"fa fa-list\"></i></button> <button ng-if=\"mode == 'block'\" class=\"btn btn-md btn-default\" ng-click=switchMode() tooltip=切换到列表视图 tooltip-placement=bottom><i class=\"fa fa-th\"></i></button> <button ng-if=showTags class=\"btn btn-md btn-default\" ng-click=switchShowTag() tooltip=隐藏标签 tooltip-placement=bottom><i class=\"fa fa-tags\"></i></button> <button ng-if=!showTags class=\"btn btn-md btn-default\" ng-click=switchShowTag() tooltip=显示标签 tooltip-placement=bottom><i class=\"fa fa-tags\"></i></button><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'size'\">大小</span> <span ng-show=\"sortField == 'creationBy.name'\">创建者</span> <span ng-show=\"sortField == 'updateDate'\">时间</span></button> <button type=button class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('size')\">大小</a></li><li><a href ng-click=\"changeSort('creationBy.name')\">创建者</a></li><li><a href ng-click=\"changeSort('updateDate')\">时间</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><div class=btn-group dropdown is-open=isopen ng-show=\"supportWebkitDirectory && checkPermission('upload') && checkPermission('create')\"><button type=button class=\"btn btn-md btn-primary\" onclick=\"Util.openSelectFileDialog('#uploadFile')\"><i class=\"glyphicon glyphicon-cloud-upload\"></i> 上传文件</button> <button type=button class=\"btn btn-md btn-primary dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu><li><a href onclick=\"Util.openSelectFileDialog('#uploadFile')\"><i class=\"fa fa-file\"></i> 上传文件</a></li><li><a href onclick=\"Util.openSelectFileDialog('#uploadFile',true)\"><i class=\"fa fa-folder\"></i> 上传文件夹</a></li></ul></div><div id=filePicker class=\"btn btn-md btn-primary\" ng-show=\"ie9 && checkPermission('upload')\"></div><button class=\"btn btn-md btn-primary\" onclick=\"Util.openSelectFileDialog('#uploadFile')\" ng-if=\"!ie9 \" ng-show=\"!supportWebkitDirectory || (checkPermission('upload') && !checkPermission('create'))\"><i class=\"glyphicon glyphicon-cloud-upload\"></i> 上传文件</button> <button class=\"btn btn-md btn-primary\" ng-show=\"checkPermission('create')\" ng-click=createDirectory()><i class=\"glyphicon glyphicon-plus\"></i> 新建文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=showAuthorizer() ng-show=\"selection.length == 1 && authorizeSetPermissions(selection[0])\"><i class=\"fa fa-lock\"></i> 设置权限</button> <button class=\"btn btn-md btn-default\" ng-if=\"checkPermission('download')\" ng-click=download() ng-show=\"selection.length > 0\"><i class=\"glyphicon glyphicon-cloud-download\"></i> 下载</button> <button class=\"btn btn-md btn-default\" ng-show=\"selection.length > 0\" ng-click=sendFile(selection);><i class=\"fa fa-paper-plane\"></i> 发送</button> <button class=\"btn btn-md btn-default\" ng-show=\"selection.length == 1 && !(selection[0].favorited)\" ng-click=addFavorite(selection[0],$event)><i class=\"fa fa-star\"></i> 收藏</button> <button class=\"btn btn-md btn-default\" ng-show=\"selection.length == 1 && selection[0].favorited\" ng-click=removeFavorite(selection[0],$event)><i class=\"fa fa-star-o\"></i> 取消收藏</button> <button class=\"btn btn-md btn-default\" ng-if=\"checkPermission('remove')\" ng-click=remove() ng-show=\"selection.length > 0 && isNolocked()\"><i class=\"glyphicon glyphicon glyphicon-trash\"></i> 删除</button><div class=btn-group dropdown is-open=moreMenuOpen ng-show=\"selection.length > 0\"><button type=button class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><i class=\"fa fa-angle-down\"></i>&nbsp;更多</button><ul class=dropdown-menu role=menu><li ng-if=\"checkPermission('rename')\" ng-click=rename(); ng-show=\"selection.length == 1\"><a href><i class=\"glyphicon glyphicon-edit\"></i>&nbsp;重命名</a></li><li ng-if=\"checkPermission('copy')\" ng-click=copy() ng-show=\"selection.length > 0\"><a href><i class=\"glyphicon glyphicon-copy\"></i>&nbsp;复制</a></li><li ng-if=\"checkPermission('move')\" ng-show=\"selection.length > 0 && isNolocked()\" ng-click=move()><a href><i class=\"fa fa-share-square-o\"></i>&nbsp;移动</a></li><li ng-if=\"checkPermission('lock')\" ng-click=lock() ng-show=\"selection.length == 1 && selection[0].type == 'file' && selection[0].locked !== true\"><a href><i class=\"glyphicon glyphicon-lock\"></i>&nbsp;锁定</a></li><li ng-if=\"checkPermission('lock')\" ng-click=unlock() ng-show=\"selection.length == 1 && selection[0].locked === true && selection[0].lockedBy.id == user.id\"><a href><i class=\"fa fa-lock\"></i>&nbsp;解锁</a></li><li ng-if=\"checkPermission('tag')\" ng-click=setTag(selection[0]) ng-show=\"selection.length == 1\"><a href><i class=\"fa fa-tag\"></i>&nbsp;标签</a></li><li ng-if=\"checkPermission('upload')\" ng-click=uploadNewVersion(selection[0]) ng-show=\"selection.length == 1 && selection[0].type == 'file'  && isNolocked()\"><a href><i class=\"glyphicon glyphicon-cloud-upload\"></i>&nbsp;上传新版本</a></li><li class=dropdown-submenu><a tabindex=-1 href=\"\"><i class=\"fa fa-share-alt\"></i>&nbsp;分享 <span class=\"pull-right m-r-n-md\"><i class=\"fa fa-fw fa-angle-right text\"></i></span></a><ul class=dropdown-menu role=menu><li><a href><i class=\"fa fa-paper-plane\"></i>&nbsp;发送给同事</a></li><li ng-show=\"selection.length == 1\" ng-click=share()><a href><i class=\"fa fa-link\"></i>&nbsp;链接分享</a></li></ul></li></ul></div></div><div class=\"col-sm-2 col-xs-2 padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control rounded input-sm\" placeholder='搜索\"{{driectoryName}}\"'></div></div></div></div><div class=\"bg-light lter app-inner\" ng-click=onContainerClick(); ng-right-click=showContainerContextMenu($event)><div class=\"table-responsive file-list\" ng-if=\"mode== 'list'\" ng-show=\"files.length > 0 && !loading\"><table class=\"table b-b b-light lter file-table\"><thead><tr><th width=5%><label class=\"i-checks i-checks-sm m-b-none\" ng-show=!condition><input type=checkbox ng-click=selecteAll() ng-checked=isSelectAll><i></i></label></th><th ng-click=\"changeSort('name')\" width=40%>名称 <i ng-show=\"sortField == 'name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('size')\" width=10%>大小 <i ng-show=\"sortField == 'size'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('creationBy.name')\" width=15%>创建者 <i ng-show=\"sortField == 'creationBy.name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('updateDate')\" width=15%>修改时间 <i ng-show=\"sortField == 'updateDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th width=15%></th></tr></thead><tbody><tr ng-repeat=\"file in files|orderBy:sortFields:sortDesc | filter:{name:condition,tags:condition}\" class=\"file-item hc-item\" ng-class=\"{true:'active'}[file.selected]\" valign=middle ng-right-click=showContextMenu(file,$event)><td width=5%><label class=\"i-checks i-checks-sm m-b-none\"><input type=checkbox ng-checked=file.selected ng-click=select(file,null,$event);><i></i></label></td><td ng-click=select(file,null) class=text-ellipsis><div class=pos-rlt><div class=file-icon-wrapper><img class=file-icon ng-src={{getIcon(file)}}></div><div class=\"pos-abt file-locker bg-primary rounded text-white\" ng-if=\"file.locked === true\" tooltip-placement=right tooltip={{file.lockedBy.name}}在{{file.lockeDate}}锁定><i class=\"fa fa-lock\"></i></div><a ng-click=open(file,$event); class=pos-rlt title={{file.name}}>{{file.name}}</a><div class=\"file-tags clearfix\" ng-show=\"showTags && file.tags\"><div class=i-tag ng-repeat=\"tag in file.tags.split(',') track by $index\"><span>{{tag}}</span></div></div></div></td><td ng-click=select(file,null,$event)>{{file.size | formatSize}}</td><td ng-click=select(file,null,$event)><img ng-if=file.creationBy ng-src=\"{{file.creationBy.avatar | resource}}\" class=img-circle style=height:30px;float:left alt=...> <span class=m-l-xs>{{file.creationBy.name}}</span></td><td ng-click=select(file,null,$event)>{{file.updateDate}}</td><td class=text-center valign=middle ng-click=select(file,null,$event)><i class=\"file-option-icon glyphicon glyphicon-cloud-download\" tooltip=下载 ng-click=download(file)></i> <i class=\"file-option-icon fa fa-paper-plane\" ng-click=sendFile(file) tooltip=发送></i> <i class=\"file-option-icon fa fa-star\" ng-if=file.favorited ng-click=removeFavorite(file,$event) tooltip=取消收藏></i> <i class=\"file-option-icon fa fa-star-o\" ng-if=!file.favorited ng-click=addFavorite(file,$event) tooltip=收藏></i></td></tr></tbody></table></div><div ng-if=\"mode == 'block'\"><ul class=file-block-list><li class=\"file-block pos-rlt\" ng-class=\"{true:'active'}[file.selected]\" ng-click=select(file,null,$event) ng-dblclick=open(file); ng-right-click=showContextMenu(file,$event) ng-repeat=\"file in files|orderBy:sortField:sortDesc | filter:{name:condition}\"><img class=file-icon ng-src={{getIcon(file)}}><div class=\"pos-abt file-locker bg-primary rounded text-white\" ng-if=\"file.locked === true\" tooltip-placement=right tooltip={{file.lockedBy.name}}在{{file.lockeDate}}锁定><i class=\"fa fa-lock\"></i></div><div class=\"file-name text-ellipsis m-t-sm\" title={{file.name}} tooltip-placement=bottom>{{file.name}}</div></li></ul></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(files.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>该文件夹中没有文件</p><button ng-if=\"\" class=\"btn btn-primary\" onclick=\"Util.openSelectFileDialog('#uploadFile')\" ng-show=\"checkPermission('upload')\"><i class=\"glyphicon glyphicon-cloud-upload\"></i>上传文件</button></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载文件夹失败：{{error}}</p></div><ul id=fileContextMenu class=dropdown-menu role=menu><li ng-click=showPermission(selected) ng-show=authorizeSetPermissions(selected)><a tabindex=-1 href=\"\"><i class=\"fa fa-lock\"></i> 设置权限</a></li><li ng-click=open(selected)><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-new-window\"></i> 打开</a></li><li><a tabindex=-1 href=\"\" ng-click=download(selected)><i class=\"glyphicon glyphicon-cloud-download\"></i> 下载</a></li><li ng-click=move(selected) ng-show=\"authorize('move',selected)\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-transfer\"></i> 移动</a></li><li ng-click=copy(selected) ng-show=\"authorize('copy',selected)\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-copy\"></i> 复制</a></li><li ng-click=rename(selected) ng-show=\"authorize('edit',selected)\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-edit\"></i> 重命名</a></li><li ng-if=\"checkPermission('lock')\" ng-click=lock(selected) ng-show=\"selected.type == 'file' && selected.locked !== true\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-lock\"></i> 锁定</a></li><li ng-if=\"checkPermission('lock')\" ng-click=unlock(selected) ng-show=\"selected.locked === true && selected.lockedBy.id == user.id\"><a tabindex=-1 href=\"\"><i class=\"fa fa-unlock-alt\"></i> 解锁</a></li><li ng-click=uploadNewVersion(selected) ng-show=\"selected.type == 'file' && authorize('upload',selected)\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-cloud-upload\"></i> 上传新版本</a></li><li ng-click=remove(selected) ng-show=\"checkPermission('remove',selected)\"><a tabindex=-1 href=\"\"><i class=\"glyphicon glyphicon-trash\"></i> 删除</a></li><li ng-if=\"checkPermission('tag')\" ng-click=setTag(selection[0])><a href><i class=\"fa fa-tag\"></i>&nbsp;标签</a></li><li class=dropdown-submenu><a tabindex=-1 href=\"\"><i class=\"fa fa-share-alt\"></i>&nbsp;分享 <span class=\"pull-right m-r-n-md\"><i class=\"fa fa-fw fa-angle-right text\"></i></span></a><ul class=dropdown-menu role=menu style=left:-100%><li ng-click=sendFile(selected)><a href><i class=\"fa fa-paper-plane\"></i>&nbsp;发送给同事</a></li><li ng-click=share(selected)><a href><i class=\"fa fa-link\"></i>&nbsp;链接分享</a></li></ul></li></ul><ul id=containerContextMenu class=dropdown-menu role=menu><li ng-click=createDirectory() ng-show=\"checkPermission('create')\"><a tabindex=-1 href=\"\">新建</a></li><li class=dropdown-submenu><a tabindex=-1 href=\"\">查看 <span class=\"pull-right m-r-n-md\"><i class=\"fa fa-fw fa-angle-right text\"></i></span></a><ul class=dropdown-menu role=menu><li ng-click=\"switchMode('list')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[mode == 'list']\"></i> 列表模式</a></li><li ng-click=\"switchMode('block')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[mode == 'block']\"></i> 图标模式</a></li></ul></li><li class=dropdown-submenu><a tabindex=-1 href=\"\">排序 <span class=\"pull-right m-r-n-md\"><i class=\"fa fa-fw fa-angle-right text\"></i></span></a><ul class=dropdown-menu role=menu><li ng-click=\"changeSort('name')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[sortField == 'name']\"></i> 名称</a></li><li ng-click=\"changeSort('size')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[sortField == 'size']\"></i> 大小</a></li><li ng-click=\"changeSort('creationBy.name')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[sortField == 'creationBy.name']\"></i> 创建者</a></li><li ng-click=\"changeSort('updateDate')\"><a tabindex=-1 href=\"\"><i class=fa ng-class=\"{true:'fa-dot-circle-o',false:'fa-circle-o'}[sortField == 'updateDate']\"></i> 时间</a></li></ul></li><li role=separator class=divider></li><li ng-click=reload()><a tabindex=-1 href=\"\">刷新</a></li></ul>"
  );


  $templateCache.put('asset/tpl/dropbox.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title><i class=\"glyphicon glyphicon-cloud-upload\"></i> 上传文件</h4></div><div class=\"modal-body no-padder\"><div class=\"dropbox-list wrapper-sm\"><div class=dropbox-item ng-repeat=\"file in files\"><div class=\"dropbox-item-inner wrapper-xs\"><div class=file-name><img class=file-icon ng-src={{getIcon(file)}}> {{file.name}}</div><div class=file-size>{{file.size | formatSize}}</div><div class=\"file-operation text-center\"><i class=\"fa fa-remove hover\" ng-click=remove(file);></i></div><div class=clearfix></div></div></div></div><div class=\"wrapper-sm b-t\"><form name=dropboxForm class=\"form-horizontal form-validation\"><div class=\"form-group m-b-none\"><label class=\"col-sm-2 control-label\">上传到：</label><div class=col-sm-10><hc-combo-tree ng-model=directory tree-config=treeConfig on-before-load=setParam(node,params) text-field=fullName on-change=onChange(node);></hc-combo-tree></div></div><div class=form-group ng-show=result><div class=\"col-sm-12 m-t-md text-center\"><div class=\"alert alert-danger m-b-none\" role=alert>{{result.message}}</div></div></div><div class=\"alert alert-danger m-b-none\" ng-show=\"allowed === false\">企业文档根目录不允许上传文件</div></form></div></div><div class=modal-footer><button type=button class=\"btn btn-primary\" ng-click=ok() ng-disabled=\"allowed === false\">上传</button> <button type=button class=\"btn btn-default\" ng-click=cancel()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/favorites.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header text-md\"><i class=\"fa fa-star\"></i> 收藏夹 </span><span class=\"text-sm m-l-xs\" ng-show=\"files.length > 0\">( <span ng-show=\"selection.length > 0\">{{selection.length}} / </span>{{files.length}} )</span></div><div class=\"col-sm-3 col-xs-3 padder-sm\"><div class=pull-right><button class=\"btn btn-md btn-default\" ng-click=switchMode()><i class=fa ng-class=\"{ true:'fa-list',false:'fa-th'}[mode == 'list']\"></i> <span ng-show=\"mode == 'list'\">列表视图</span> <span ng-show=\"mode == 'block'\">图标视图</span></button><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'size'\">大小</span> <span ng-show=\"sortField == 'creationBy.name'\">创建者</span> <span ng-show=\"sortField == 'updateDate'\">时间</span></button> <button type=button class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('size')\">大小</a></li><li><a href ng-click=\"changeSort('creationBy.name')\">创建者</a></li><li><a href ng-click=\"changeSort('updateDate')\">时间</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'file'\"><i class=\"glyphicon glyphicon-new-window\"></i> 打开文件</button> <button class=\"btn btn-md btn-default\" ng-click=openParent(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'file'\"><i class=\"fa fa-folder-open\"></i> 打开所在文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'directory'\"><i class=\"fa fa-folder-open\"></i> 打开文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=removeFavorite(); ng-show=\"selection.length > 0\"><i class=\"glyphicon glyphicon-trash\"></i> 删除收藏</button></div><div class=\"col-sm-2 col-xs-2 text-right padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control input-sm rounded\" placeholder='搜索\"收藏夹\"'></div></div></div></div><div class=\"bg-light lter app-inner\" ng-click=onContainerClick();><div class=\"table-responsive file-list\" ng-if=\"mode== 'list'\" ng-show=\"files.length > 0 && !loading\"><table class=\"table b-b b-light lter file-table\"><thead><tr><th width=5%><label class=\"i-checks i-checks-sm m-b-none\" ng-show=!condition><input type=checkbox ng-click=selecteAll() ng-checked=isSelectAll><i></i></label></th><th ng-click=\"changeSort('name')\" width=40%>名称 <i ng-show=\"sortField == 'name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('size')\" width=10%>大小 <i ng-show=\"sortField == 'size'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('creationBy.name')\" width=15%>创建者 <i ng-show=\"sortField == 'creationBy.name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('updateDate')\" width=15%>修改时间 <i ng-show=\"sortField == 'updateDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th></tr></thead><tbody><tr ng-repeat=\"file in files|orderBy:sortFields:sortDesc | filter:{name:condition}\" class=\"file-item hc-item\" ng-class=\"{true:'active'}[file.selected]\" valign=middle ng-click=select(file)><td width=5%><label class=\"i-checks i-checks-sm m-b-none\"><input type=checkbox ng-checked=file.selected ng-click=select(file);><i></i></label></td><td class=text-ellipsis><a ng-click=open(file,$event);><div class=file-icon-wrapper><img class=file-icon ng-src={{getIcon(file)}}></div>{{file.name}}</a></td><td>{{file.size | formatSize}}</td><td><img ng-if=file.creationBy ng-src=\"{{file.creationBy.avatar | resource}}\" class=img-circle style=height:30px;float:left alt=...> <span class=m-l-xs>{{file.creationBy.name}}</span></td><td>{{file.updateDate}}</td></tr></tbody></table></div><div ng-if=\"mode == 'block'\"><ul class=file-block-list><li class=file-block ng-class=\"{true:'active'}[file.selected]\" ng-click=select(file,null,$event) ng-dblclick=open(file,$event); ng-repeat=\"file in files|orderBy:sortField:sortDesc | filter:{name:condition}\"><img class=file-icon ng-src={{getIcon(file)}}><div class=\"file-name text-ellipsis m-t-sm\" tooltip={{file.name}} tooltip-placement=bottom>{{file.name}}</div></li></ul></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(files.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>收藏夹中没有文件</p></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载文件夹失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/file_send.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title><i class=\"fa fa-paper-plane\"></i> 发送文件</h4></div><div class=\"modal-body no-padder\"><div class=\"dropbox-list wrapper-sm\"><div class=dropbox-item ng-repeat=\"file in files\"><div class=\"dropbox-item-inner wrapper-xs clearfix\"><div class=file-name><img class=file-icon ng-src={{getIcon(file)}}> {{file.name}}</div><div ng-if=file.size class=file-size>{{file.size | formatSize}}</div><div ng-if=!file.size class=file-size>&nbsp;</div><div class=\"file-operation text-center\"><i class=\"fa fa-remove hover\" ng-click=remove(file);></i></div></div></div></div><div class=\"wrapper-sm b-t clearfix\"><form class=form-horizontal><div class=form-group><label class=\"col-sm-2 control-label\">接收人:</label><div class=col-sm-10><div class=\"permission-user-selected wrapper-sm text-center inline hover-bg\" ng-repeat=\"user in users\"><button type=button class=close ng-click=removeReceiver(user)><span aria-hidden=true>×</span></button> <img ng-src=\"{{user.avatar | resource}}\" class=img-circle style=height:35px alt=...><div class=\"text-ellipsis m-t-xs text-sm\">{{user.name}}</div></div><div><button class=\"btn btn-default btn-md btn-sm m-t-xs\" ng-click=addReceiver();><i class=\"fa fa-users\"></i> 选择接收人</button></div></div></div><div class=form-group><label class=\"col-sm-2 control-label\">留言：</label><div class=col-sm-10><input class=form-control ng-model=content></div></div></form></div></div><div class=modal-footer><button type=button class=\"btn btn-primary\" ng-click=ok() ng-disabled=\"!users || users.length == 0 || !files || files.length == 0\"><i class=\"fa fa-paper-plane\"></i> 发送</button> <button type=button class=\"btn btn-default\" ng-click=cancel()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/file.html',
    "<div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载...</p></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p>加载文件失败：{{error}}</p><button class=\"btn btn-default\" ng-click=close()><i class=\"glyphicon glyphicon-chevron-left\"></i>返回</button></div><div class=\"m-c h-full\" ng-show=\"!loading && !error\" style=\"overflow: hidden\"><div class=\"modal-header pos-fix w-full wrapper-sm bg-primary text-white\" style=z-index:99><div class=\"navbar-header pull-right fild-detail-toolbar\"><button class=\"pull-right hover\" ng-click=close(); tooltip=关闭 tooltip-placement=bottom><i class=\"glyphicon glyphicon-remove\"></i></button> <button class=\"pull-right hover\" ng-click=\"hiddenDetail = !hiddenDetail\" tooltip=切换详情栏 tooltip-placement=bottom><i class=\"glyphicon glyphicon-align-justify\"></i></button> <button class=\"pull-right hover\" ng-click=fullScreen(); ng-show=supportFullScreen tooltip=全屏 tooltip-placement=bottom><i class=\"glyphicon glyphicon-resize-full\"></i></button> <button class=\"pull-right hover\" ng-if=\"file.locked !== true\" ng-click=remove() ng-show=\"checkPermission('remove')\" tooltip=删除 tooltip-placement=bottom><i class=\"glyphicon glyphicon-trash\"></i></button> <button class=\"pull-right hover\" ng-click=copy() ng-show=\"checkPermission('copy')\" tooltip=复制 tooltip-placement=bottom><i class=\"glyphicon glyphicon-copy\"></i></button> <button class=\"pull-right hover\" ng-if=\"file.locked !== true\" ng-click=move() ng-show=\"checkPermission('move')\" tooltip=移动 tooltip-placement=bottom><i class=\"fa fa-share-square-o\"></i></button> <button class=\"pull-right hover\" ng-if=\"file.locked !== true\" ng-click=rename() ng-show=\"checkPermission('rename')\" tooltip=重命名 tooltip-placement=bottom><i class=\"glyphicon glyphicon-edit\"></i></button> <button class=\"pull-right hover\" ng-if=\"file.locked !== true\" ng-click=uploadNewVersion(file) ng-show=\"checkPermission('upload')\" tooltip=上传新版本 tooltip-placement=bottom><i class=\"glyphicon glyphicon-cloud-upload\"></i></button></div><h4 class=modal-title style=\"line-height: 34px\"><img ng-src={{file.icon}} style=\"max-height: 30px;max-width: 30px; margin-top: -2px\"> <span class=m-l-xs>{{pageNumber.name}}<span ng-if=!pageNumber.pageNumber>&nbsp;，版本：V{{pageNumber.versionNo}}</span></span></h4></div><div class=\"modal-body h-full\" style=\"padding: 55px 0px 0px 0px\"><div id=file-preview-container class=\"h-full no-padder bg-light\" ng-class=\"{'col-sm-12':hiddenDetail,'col-sm-9':!hiddenDetail}\"><div ng-if=\"pageNumber.media == 'image'\" class=\"h-full text-center file-image-container\"><div class=\"file-image-wrapper w-full h-full wrapper-xl\"><img ng-src={{geImageSrc(pageNumber)}} ng-class=\"{'file-image-fill':!full}\" style=transform:rotate({{deg}}deg)></div><div class=\"file-image-tools b\"><button class=hover tooltip=原始大小 ng-show=!full ng-click=\"full = !full\"><i class=\"glyphicon glyphicon-resize-full\"></i></button> <button class=hover tooltip=自适应 ng-show=full ng-click=\"full = !full\"><i class=\"glyphicon glyphicon-resize-small\"></i></button> <button class=hover tooltip=旋转 ng-click=rotate()><i class=\"glyphicon glyphicon-repeat\"></i></button></div></div><div ng-if=\"pageNumber.media == 'document'\" class=h-full><iframe ng-src={{getPreviewUrl(pageNumber)}} width=100% height=100% frameborder=0 scrolling=yes></iframe></div><div ng-if=\"pageNumber.media == 'unknow'\" class=\"h-full wrapper-xl text-center\"><img ng-src=\"{{'asset/img/info.png' | resource}}\" style=\"height: 180px\"><p>该文件不支持在线预览，请下载后在本地打开</p><button class=\"btn btn-default\" ng-click=download()><i class=\"glyphicon glyphicon-cloud-download\"></i> 下载</button></div></div><div class=\"no-padder b-l h-full wrapper-sm\" ng-class=\"{'hidden':hiddenDetail,'col-sm-3':!hiddenDetail}\" style=\"overflow: auto\"><tabset justified=true class=\"tab-container file-tab\"><tab heading=详情><div class=\"wrapper-sm text-center b-b\"><img ng-src={{pageNumber.icon}} style=max-height:80px><p class=\"m-t-xs font-bold m-b-none\" style=word-break:break-all>{{pageNumber.name}}</p><div class=\"text-2x m-t-sm\"><i ng-if=\"checkPermission('lock')\" ng-show=\"pageNumber.pageNumber && pageNumber.locked !== true\" ng-click=lock(); class=\"fa fa-lock hover\" tooltip=锁定></i> <i ng-if=\"checkPermission('lock')\" ng-show=\"pageNumber.pageNumber && pageNumber.locked === true && pageNumber.lockedBy.id == user.id\" class=\"fa fa-unlock-alt hover\" tooltip=解锁 ng-click=unlock();></i> <i ng-if=\"favorited && pageNumber.pageNumber\" ng-click=removeFavorite(); class=\"fa fa-star hover\" tooltip=取消收藏></i> <i ng-if=\"!favorited && pageNumber.pageNumber\" ng-click=addFavorite(); class=\"fa fa-star-o hover hover\" tooltip=收藏></i> <i class=\"glyphicon glyphicon-cloud-download m-r-sm hover\" ng-click=download() ng-show=\"checkPermission('download')\" tooltip=下载></i></div></div><div class=\"wrapper-sm clearfix\" style=\"line-height: 30px\"><div class=\"col-sm-4 font-bold text-right m-t-xs\">文件大小:</div><div class=\"col-sm-8 m-t-xs\">{{pageNumber.size | formatSize}}</div><div class=\"col-sm-4 font-bold text-right m-t-xs\">创建者:</div><div class=\"col-sm-8 m-t-xs\"><img ng-src=\"{{pageNumber.createdBy.avatar | resource}}\" class=img-circle style=height:30px;float:left alt=...> <span class=m-l-xs>{{pageNumber.createdBy.name}}</span></div><div class=\"col-sm-4 font-bold text-right m-t-xs\">创建时间:</div><div class=\"col-sm-8 m-t-xs\">{{pageNumber.createDate}}</div><div class=\"col-sm-4 font-bold text-right m-t-xs\">标签:</div><div class=\"col-sm-8 m-t-xs\"><div class=i-tag style=line-height:1.42857143 ng-repeat=\"tag in file.tags.split(',') track by $index\"><span>{{tag}}</span></div><div ng-if=!file.tags class=text-muted>没有设置标签</div></div></div></tab><tab heading=评论><div class=\"wrapper-sm b-b\"><form name=reviewForm><textarea ng-model=reviewContent name=reviewContent class=form-control rows=3></textarea><div class=\"text-right m-t-sm\"><button class=\"btn btn-primary\" ng-disabled=!reviewContent ng-click=addReview(reviewContent)>发表</button></div></form></div><div class=\"file-review b-b wrapper-sm hover-bg\" ng-repeat=\"review in reviews\"><a href title=删除评论 class=close ng-click=removeReview(review) ng-if=\"review.reviewer == user.id\">×</a><div class=file-review-head><img ng-src=\"{{ review.avatar | resource }}\" class=rounded><div class=file-review-user><div>{{review.name}}</div><div class=\"text-muted text-sm\"><i class=\"fa fa-clock-o\"></i> {{review.reviewDate}}</div></div></div><div class=\"m-t-xs file-review-content\">{{review.content}}</div></div></tab><tab heading=版本><ul class=file-versions><li class=\"hover-bg lter wrapper-sm\" ng-repeat=\"version in versions | orderBy:verisionNo\"><div class=version-icon><img ng-src={{getIcon(version)}}></div><div title=预览该版本文件 ng-click=setCurrent(version);><span class=\"version-no label label-primary\">V{{version.versionNo}}</span> <span class=version-name>{{version.name}}</span> <span ng-if=version.pageNumber class=\"label label-success version-pageNumber\">最新</span></div><ul class=version-meta><li>{{version.creationBy.name}}</li><li>&nbsp;创建于 <span>{{version.createDate}}</span></li><li>&nbsp;{{version.size | formatSize}}</li></ul><div class=version-action><a ng-if=!version.pageNumber href=# ng-click=setVersion(version)>设置最新版本</a> <span ng-if=!version.pageNumber>|</span> <a ng-if=!version.pageNumber href=# ng-click=deleteVersion(version)>删除</a> <span ng-if=!version.pageNumber>|</span> <a class=download ng-click=download(version)>下载</a></div></li></ul></tab></tabset></div></div></div>"
  );


  $templateCache.put('asset/tpl/messages.html',
    "<div class=app-ctrl style=\"padding-top:76px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-md bg-light lter\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header h3\"><i class=\"glyphicon glyphicon-comment\"></i> 消息通知</span></div></div></div><div class=\"bg-white wrapper-md app-inner\"><div class=m-b ng-repeat=\"message in messages\"><a href class=\"pull-left thumb-xs avatar\"><img ng-src=\"{{message.senderAvatar | resource}}\" alt=...><p class=\"m-t-xs text-xs text-ellipsis\">{{message.senderName}}</p></a><div class=clear><div class=\"pos-rlt wrapper-sm b bg-light r m-l-sm message\"><span class=\"arrow left pull-up arrow-light\"></span><p class=m-b-xs ng-if=message.content>留言：{{message.content}}</p><div class=\"message-file pos-rlt\" ng-if=message.file>文件： <a ng-click=open(message.file) class=\"file-box wrapper-sm clearfix pos-rlt b bg-light lter\" href=\"\"><div class=\"file-icon text-center\"><img ng-src={{getIcon(message.file)}}></div><div class=file-content><div class=file-name>{{message.file.name}}</div><div class=file-size ng-if=message.file.size>{{message.file.size | formatSize}}</div><div class=file-size ng-if=!message.file.size>&nbsp;</div></div></a></div></div><small class=\"text-muted m-l-sm message-date\"><i class=\"fa fa-ok text-success\"></i>{{message.sendDate}}</small></div></div></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(files.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>没有未读消息</p></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载文件夹失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/move.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title>移动文件(夹)</h4></div><div class=\"modal-body no-padder\"><div class=permission-user-body><div class=\"col-sm-12 permission-user-part b-r wrapper-sm\"><div class=wrapper-xs>选择要移动到的位置</div><hc-tree tree-control=tree load-asyn=true leaf-icon=\"fa fa-folder\" on-node-dbl-click=select(node); on-selection-change=setTarget(selection); on-before-load=setParam(node,params); load-url=/fs/folder></hc-tree></div></div><div class=\"wrapper-sm b-t row m-l-none m-r-none\" ng-show=target><b>将移动到：</b><span>{{paths}}</span></div><div class=\"wrapper-sm b-t row m-l-none m-r-none\" ng-show=isRepeat>所选的文件已经在该文件夹中，请选择其他文件夹。</div></div><div class=modal-footer><button type=button class=\"btn btn-primary\" ng-click=ok() ng-disabled=!target>确定</button> <button type=button class=\"btn btn-default\" ng-click=close()>取消</button></div></div>"
  );


  $templateCache.put('asset/tpl/profile.html',
    "<div class=app-ctrl style=\"padding-top:76px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-md bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header h3\"><i class=\"fa fa-user\"></i> 个人设置</span></div><div class=\"col-sm-3 col-xs-3\" style=\"text-align: right\"><button class=\"btn btn-primary\" ng-disabled=\"userSettingForm.$invalid || !userSettingForm.$dirty\" ng-click=save()>保存</button></div></div></div><div class=\"bg-light wrapper-md lter app-inner\"><form name=userSettingForm class=\"form-horizontal form-property form-validation\"><div class=\"panel panel-default\"><div class=\"panel-heading font-bold\">个人信息</div><div class=panel-body><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">用户名</label><div class=\"col-sm-7 control-label\">{{user.username}}</div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">邮箱</label><div class=col-sm-7><input type=email name=name ng-model=user.email required class=\"form-control w-md\"></div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=form-group><label class=\"col-sm-5 control-label\">姓名</label><div class=col-sm-7><input name=name ng-model=user.name required class=\"form-control w-md\"></div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=form-group><label class=\"col-sm-5 control-label\">头像</label><input id=avatarInput type=file class=hidden onchange=angular.element(this).scope().upload()><div class=\"col-sm-7 m-b-sm\"><div><img ng-src=\"{{user.avatar | resource}}\" class=\"rounded w-xs m-b-sm avatar-img\"></div><button class=\"btn btn-default\" ng-click=selectAvatar() ng-disabled=uploading><span ng-show=uploading>正在上传</span> <span ng-show=!uploading>选择头像</span></button> 推荐尺寸240*240，大小不超过2MB<div class=\"alert alert-danger m-t-sm m-b-none w-md\" ng-show=\"result.success === false\" role=alert>{{result.message}}</div></div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">部门</label><div class=\"col-sm-7 control-label\">{{user.department.name}}</div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=form-group><label class=\"col-sm-5 control-label\">个人空间</label><div class=\"col-sm-7 control-label\"><div class=m-b-xs>总共：{{space.quato | formatSize}}，已用：{{space.used | formatSize}}</div><progressbar value=space.quatoPrecent type=white class=\"progress-xs m-b-none dker w-md\"></progressbar></div></div></div></div><div class=\"panel panel-default\"><div class=\"panel-heading font-bold\">偏好设置</div><div class=panel-body><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">文件显示模式</label><div class=col-sm-7><label class=\"checkbox-inline i-checks\"><input type=radio name=mode value=list ng-checked=\"user.mode == 'list'\" ng-model=user.mode><i></i> 列表模式</label><label class=\"checkbox-inline i-checks\"><input type=radio name=mode value=block ng-checked=\"user.mode == 'block'\" ng-model=user.mode><i></i> 图标模式</label></div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">排序字段</label><div class=col-sm-7><label class=\"checkbox-inline i-checks\"><input type=radio name=sortField value=name ng-checked=\"user.sortField == 'name'\" ng-model=user.sortField><i></i> 名称</label><label class=\"checkbox-inline i-checks\"><input type=radio name=sortField value=size ng-checked=\"user.sortField == 'size'\" ng-model=user.sortField><i></i> 大小</label><label class=\"checkbox-inline i-checks\"><input type=radio name=sortField value=updateDate ng-checked=\"user.sortField == 'updateDate'\" ng-model=user.sortField><i></i> 时间</label><label class=\"checkbox-inline i-checks\"><input type=radio name=sortField value=creationBy.name ng-checked=\"user.sortField == 'creationBy.name'\" ng-model=user.sortField><i></i> 创建者</label></div></div><div class=\"line line-dashed b-b line-lg\"></div><div class=\"form-group m-b-sm\"><label class=\"col-sm-5 control-label\">排序模式</label><div class=col-sm-7><label class=\"checkbox-inline i-checks\"><input type=radio name=sortDesc value=false ng-checked=\"user.sortDesc !== true\" ng-model=user.sortDesc><i></i> 升序</label><label class=\"checkbox-inline i-checks\"><input type=radio name=sortDesc value=true ng-checked=\"user.sortDesc === true\" ng-model=user.sortDesc><i></i> 降序</label></div></div></div></div></form></div></div>"
  );


  $templateCache.put('asset/tpl/recent.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header text-md\"><i class=\"fa fa-clock-o\"></i> 最近打开 </span><span class=\"text-sm m-l-xs\" ng-show=\"files.length > 0\">( <span ng-show=\"selection.length > 0\">{{selection.length}} / </span>{{files.length}} )</span></div><div class=\"col-sm-3 col-xs-3 padder-sm\"><div class=pull-right><button class=\"btn btn-md btn-default\" ng-click=switchMode()><i class=fa ng-class=\"{ true:'fa-list',false:'fa-th'}[mode == 'list']\"></i> <span ng-show=\"mode == 'list'\">列表视图</span> <span ng-show=\"mode == 'block'\">图标视图</span></button><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'size'\">大小</span> <span ng-show=\"sortField == 'creationBy.name'\">创建者</span> <span ng-show=\"sortField == 'updateDate'\">时间</span></button> <button type=button btn-md class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('size')\">大小</a></li><li><a href ng-click=\"changeSort('creationBy.name')\">创建者</a></li><li><a href ng-click=\"changeSort('updateDate')\">时间</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'file'\"><i class=\"glyphicon glyphicon-new-window\"></i> 打开文件</button> <button class=\"btn btn-md btn-default\" ng-click=openParent(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'file'\"><i class=\"fa fa-folder-open\"></i> 打开所在文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'directory'\"><i class=\"fa fa-folder-open\"></i> 打开文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=removeRecent() ng-show=\"selection.length > 0\"><i class=\"glyphicon glyphicon-trash\"></i> 删除记录</button> <button class=\"btn btn-md btn-default\" ng-click=clear() ng-show=\"files.length > 0\"><i class=\"glyphicon glyphicon-trash\"></i> 清空记录</button></div><div class=\"col-sm-2 col-xs-2 text-right padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control input-sm rounded\" placeholder='搜索\"最近打开\"'></div></div></div></div><div class=\"bg-light lter app-inner\" ng-click=onContainerClick();><div class=\"table-responsive file-list\" ng-if=\"mode== 'list'\" ng-show=\"files.length > 0 && !loading\"><table class=\"table b-b b-light lter file-table\"><thead><tr><th width=5%><label class=\"i-checks i-checks-sm m-b-none\" ng-show=!condition><input type=checkbox ng-click=selecteAll() ng-checked=isSelectAll><i></i></label></th><th ng-click=\"changeSort('name')\" width=40%>名称 <i ng-show=\"sortField == 'name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('size')\" width=10%>大小 <i ng-show=\"sortField == 'size'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('creationBy.name')\" width=15%>创建者 <i ng-show=\"sortField == 'creationBy.name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('updateDate')\" width=15%>修改时间 <i ng-show=\"sortField == 'updateDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th></tr></thead><tbody><tr ng-repeat=\"file in files|orderBy:sortFields:sortDesc | filter:{name:condition}\" class=\"file-item hc-item\" ng-class=\"{true:'active'}[file.selected]\" valign=middle><td width=5%><label class=\"i-checks i-checks-sm m-b-none\"><input type=checkbox ng-checked=file.selected ng-click=select(file,null,$event);><i></i></label></td><td ng-click=select(file,null,$event) class=text-ellipsis><a ng-click=open(file,$event);><div class=file-icon-wrapper><img class=file-icon ng-src={{getIcon(file)}}></div>{{file.name}}</a></td><td ng-click=select(file,null,$event)>{{file.size | formatSize}}</td><td ng-click=select(file,null,$event)><img ng-if=file.creationBy ng-src=\"{{file.creationBy.avatar | resource}}\" class=img-circle style=height:30px;float:left alt=...> <span class=m-l-xs>{{file.creationBy.name}}</span></td><td ng-click=select(file,null,$event)>{{file.updateDate}}</td></tr></tbody></table></div><div ng-if=\"mode == 'block'\"><ul class=file-block-list><li class=file-block ng-class=\"{true:'active'}[file.selected]\" ng-click=select(file,null,$event) ng-dblclick=open(file,$event); ng-repeat=\"file in files|orderBy:sortField:sortDesc | filter:{name:condition}\"><img class=file-icon ng-src={{getIcon(file)}}><div class=\"file-name text-ellipsis m-t-sm\" tooltip={{file.name}} tooltip-placement=bottom>{{file.name}}</div></li></ul></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(files.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>最近没有打开文件</p></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载最近的文件失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/recycle.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header text-md\"><i class=\"glyphicon glyphicon-trash\"></i> 回收站 </span><span class=\"text-sm m-l-xs\" ng-show=\"files.length > 0\">( <span ng-show=\"selection.length > 0\">{{selection.length}} / </span>{{files.length}} )</span></div><div class=\"col-sm-3 col-xs-3 padder-sm\"><div class=pull-right><button class=\"btn btn-md btn-default\" ng-click=switchMode()><i class=fa ng-class=\"{ true:'fa-list',false:'fa-th'}[mode == 'list']\"></i> <span ng-show=\"mode == 'list'\">列表视图</span> <span ng-show=\"mode == 'block'\">图标视图</span></button><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'size'\">大小</span><span ng-show=\"sortField == 'deleteBy.name'\">删除者</span> <span ng-show=\"sortField == 'updateDate'\">修改时间</span> <span ng-show=\"sortField == 'deleteDate'\">删除时间</span></button> <button type=button class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('size')\">大小</a></li><li><a href ng-click=\"changeSort('deleteBy.name')\">删除者</a></li><li><a href ng-click=\"changeSort('updateDate')\">修改时间</a></li><li><a href ng-click=\"changeSort('deleteDate')\">删除时间</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><button class=\"btn btn-md btn-default\" ng-click=revert() ng-show=\"selection.length > 0\"><i class=\"fa fa-recycle\"></i> 恢复文件</button> <button class=\"btn btn-md btn-default\" ng-click=openParent(selection[0],$event) ng-show=\"selection.length == 1\"><i class=\"glyphicon glyphicon-new-window\"></i> 打开所在文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=destroy() ng-show=\"selection.length > 0\"><i class=\"fa fa-trash\"></i> 彻底删除</button> <button class=\"btn btn-md btn-default\" ng-click=clear() ng-show=\"files.length > 0\"><i class=\"fa fa-trash-o\"></i> 清空回收站</button></div><div class=\"col-sm-2 col-xs-2 text-right padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control input-sm rounded\" placeholder='搜索\"回收站\"'></div></div></div></div><div class=\"bg-light lter app-inner\" ng-click=onContainerClick();><div class=\"table-responsive file-list\" ng-if=\"mode== 'list'\" ng-show=\"files.length > 0 && !loading\"><table class=\"table b-b b-light lter file-table\"><thead><tr><th width=5%><label class=\"i-checks i-checks-sm m-b-none\" ng-show=!condition><input type=checkbox ng-click=selecteAll() ng-checked=isSelectAll><i></i></label></th><th ng-click=\"changeSort('name')\" width=40%>名称 <i ng-show=\"sortField == 'name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('size')\" width=10%>大小 <i ng-show=\"sortField == 'size'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('deleteBy.name')\" width=10%>删除者 <i ng-show=\"sortField == 'deleteBy.name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('deleteDate')\" width=15%>删除时间 <i ng-show=\"sortField == 'deleteDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('updateDate')\" width=15%>修改时间 <i ng-show=\"sortField == 'updateDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th></tr></thead><tbody><tr ng-repeat=\"file in files|orderBy:sortFields:sortDesc | filter:{name:condition}\" class=\"file-item hc-item\" ng-class=\"{true:'active'}[file.selected]\" valign=middle ng-click=select(file)><td width=5%><label class=\"i-checks i-checks-sm m-b-none\"><input type=checkbox ng-checked=file.selected ng-click=select(file);><i></i></label></td><td class=text-ellipsis><a ng-click=open(file,$event);><div class=file-icon-wrapper><img class=file-icon ng-src={{getIcon(file)}}></div>{{file.name}}</a></td><td>{{file.size | formatSize}}</td><td><img ng-if=file.creationBy ng-src=\"{{file.deleteBy.avatar | resource}}\" class=img-circle style=height:30px;float:left alt=...> <span class=m-l-xs>{{file.deleteBy.name}}</span></td><td>{{file.deleteDate}}</td><td>{{file.updateDate}}</td></tr></tbody></table></div><div ng-if=\"mode == 'block'\"><ul class=file-block-list><li class=file-block ng-class=\"{true:'active'}[file.selected]\" ng-click=select(file,null,$event) ng-dblclick=open(file,$event); ng-repeat=\"file in files|orderBy:sortField:sortDesc | filter:{name:condition}\"><img class=file-icon ng-src={{getIcon(file)}}><div class=\"file-name text-ellipsis m-t-sm\" tooltip={{file.name}} tooltip-placement=bottom>{{file.name}}</div></li></ul></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(files.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>回收站中没有文件</p></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载回收站失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/search.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden;padding-bottom: 42px\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header text-md\"><i class=\"fa fa-search\"></i> \"{{keyword}}\" - 搜索结果 </span><span class=\"text-sm m-l-xs\" ng-show=\"files.length > 0\">( <span ng-show=\"selection.length > 0\">{{selection.length}} / </span>{{files.length}} )</span></div><div class=\"col-sm-3 col-xs-3 padder-sm hidden\"><div class=pull-right><button class=\"btn btn-md btn-default\" ng-click=switchMode()><i class=fa ng-class=\"{ true:'fa-list',false:'fa-th'}[mode == 'list']\"></i> <span ng-show=\"mode == 'list'\">列表视图</span> <span ng-show=\"mode == 'block'\">图标视图</span></button><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'size'\">大小</span> <span ng-show=\"sortField == 'creationBy.name'\">创建者</span> <span ng-show=\"sortField == 'updateDate'\">时间</span></button> <button type=button btn-md class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('size')\">大小</a></li><li><a href ng-click=\"changeSort('creationBy.name')\">创建者</a></li><li><a href ng-click=\"changeSort('updateDate')\">时间</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 \"><i class=\"glyphicon glyphicon-new-window\"></i> 打开文件</button> <button class=\"btn btn-md btn-default\" ng-click=openParent(selection[0],$event) ng-show=\"selection.length == 1 \"><i class=\"fa fa-folder-open\"></i> 打开所在文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=download() ng-show=\"selection.length > 0 \"><i class=\"glyphicon glyphicon-cloud-download\"></i> 下载</button></div><div class=\"col-sm-2 col-xs-2 text-right padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control input-sm rounded\" placeholder=在结果中搜索></div></div></div></div><div class=\"bg-white app-inner\"><ul class=search-result><li class=\"wrapper-sm b-b\" ng-class=\"{true:'active'}[file.selected]\" ng-repeat=\"file in result.result\"><div class=search-item><label class=\"i-checks i-checks-sm m-b-none item-checker\"><input type=checkbox ng-checked=file.selected ng-click=select(file,null,$event);><i></i></label><div class=item-head><div class=item-icon><img ng-src={{getIcon(file)}}></div><div ng-click=open(file,$event)><span class=item-name ng-bind-html=\"file.name | trustHtml\"></span></div><ul class=\"item-meta clearfix\"><li>{{file.createdBy}}</li><li>&nbsp;创建于 <span>{{file.createDate}}</span></li><li>&nbsp;{{file.size | formatSize}}</li></ul></div><div class=item-summary ng-bind-html=\"file.summary | trustHtml\"></div><div class=item-path><a class=text-primary ng-click=openParent(file,$event) href>{{file.fullName}}</a></div></div></li></ul><div ng-if=\"mode == 'block'\"><ul class=file-block-list><li class=file-block ng-class=\"{true:'active'}[file.selected]\" ng-click=select(file,null,$event) ng-dblclick=open(file,$event); ng-repeat=\"file in files|orderBy:sortField:sortDesc | filter:{name:condition}\"><img class=file-icon ng-src={{getIcon(file)}}><div class=\"file-name text-ellipsis m-t-sm\" tooltip={{file.name}} tooltip-placement=bottom>{{file.name}}</div></li></ul></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(result.result.length == 0 || !result.result) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>没有搜索到与关键词匹配的文件</p></div></div><div class=\"pos-abt w-full b-t\" style=bottom:0px ng-show=\"!error && result.total > 0 && !loading\"><div class=\"col-sm-6 wrapper-xs\"><button class=\"btn btn-sm btn-link\" ng-click=loadPage(1) ng-disabled=\"pagination.page == 1\"><i class=\"fa fa-fast-backward\"></i></button> <button class=\"btn btn-sm btn-link\" ng-click=\"loadPage(pagination.page - 1)\" ng-disabled=\"pagination.page == 1\"><i class=\"fa fa-backward\"></i></button> <input class=\"inline form-control input-sm\" style=\"width: 30px\" ng-model-options=\"{ updateOn: 'blur' }\" ng-change=onPageChange(); ng-model=pagination.page> / <span>{{pagination.pages}}</span> <button class=\"btn btn-sm btn-link\" ng-click=\"loadPage(pagination.page + 1)\" ng-disabled=\"pagination.page == pagination.pages\"><i class=\"fa fa-forward\"></i></button> <button class=\"btn btn-sm btn-link\" ng-click=loadPage(pagination.pages) ng-disabled=\"pagination.page == pagination.pages\"><i class=\"fa fa-fast-forward\"></i></button></div><div class=\"col-sm-6 wrapper-xs text-right\"><div style=\"line-height: 30px\">共{{result.total}}条数据，每页显示<select class=\"form-control input-sm inline\" style=width:65px ng-change=reload() ng-model=pagination.size><option value=20>20</option><option value=50>50</option><option value=100>100</option><option value=200>200</option></select>条</div></div><div class=clearfix></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>搜索文件失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/share.html',
    "<div class=m-c><div class=modal-header><button type=button class=close ng-click=close();><span aria-hidden=true>×</span></button><h4 class=modal-title style=\"line-height: 34px\"><i class=\"fa fa-share-alt\"></i> 分享文件</h4></div><div class=modal-body><div class=row><div class=col-sm-12><form name=shareForm class=\"form-horizontal form-validation\"><div class=form-group><label class=\"col-sm-2 control-label\" style=padding-left:5px;padding-right:5px>分享链接：</label><div class=col-sm-10><div class=input-group><span class=input-group-addon><i class=\"fa fa-link\"></i></span><textarea type=text name=link id=shareLink ng-model=link class=form-control readonly></textarea><span class=input-group-btn></span></div></div></div><div class=form-group><label class=\"col-sm-2 control-label\" style=padding-left:5px;padding-right:5px>访问密码：</label><div class=col-sm-10><div class=input-group><span class=input-group-addon><i class=\"glyphicon glyphicon-lock\"></i></span> <input name=code ng-model=share.password class=form-control></div></div></div><div class=form-group><label class=\"col-sm-2 control-label\" style=padding-left:5px;padding-right:5px>到期时间：</label><div class=col-sm-10><div class=input-group><span class=input-group-addon><i class=\"fa fa-calendar\"></i></span> <input class=form-control ng-click=\"opened = true\" date-format=YYYY-MM-DD ng-model=share.dueDate datepicker-popup=yyyy-MM-dd is-open=opened datepicker-options=\"{formatYear: 'yyyy',class:'datepicker',showWeeks:false}\" close-text=关闭 pageNumber-text=今天 clear-text=清除></div></div></div><div class=\"alert alert-warning m-b-none\"><p style=\"text-indent: 2em\"><b>说明：</b>分享个人文档任何用户可以通过密码（如果有设置）进行访问，分享企业文档除密码之外（如果有设置）必须用户拥有权限才能访问。</p></div></form></div></div></div><div class=modal-footer><button type=button class=\"btn btn-primary\" ng-click=update() ng-disabled=\"!shareForm.$dirty || saving\"><span ng-show=!saving>提交</span> <span ng-show=saving>正在提交...</span></button> <button type=button class=\"btn btn-primary\" ng-click=remove() ng-disabled=\"deleting || !share\"><span ng-show=!deleting>删除分享</span> <span ng-show=deleting>正在删除...</span></button> <button class=\"btn btn-default\" type=button ng-click=copy();><i class=\"fa fa-copy\"></i> 复制链接</button> <button type=button class=\"btn btn-default\" ng-click=close()>关闭</button></div></div>"
  );


  $templateCache.put('asset/tpl/shares.html',
    "<div class=app-ctrl style=\"padding-top:90px;overflow: hidden\" ng-show=!error><div class=\"b-b app-title-fixed padder\"><div class=\"row wrapper-xs b-b bg-light\"><div class=\"col-sm-9 col-xs-9 padder-sm\"><span class=\"m-n directory-header text-md\"><i class=\"fa fa-share-alt\"></i> 我的分享</span></div><div class=\"col-sm-3 col-xs-3 padder-sm\"><div class=pull-right><div class=btn-group dropdown is-open=openSortmenu><button type=button class=\"btn btn-md btn-default\" ng-click=changeDesc();><i ng-class=\"{'fa-long-arrow-down' : sortDesc,'fa-long-arrow-up':!sortDesc}\" class=fa></i> <span ng-show=\"sortField == 'name'\">名称</span> <span ng-show=\"sortField == 'shareDate'\">分享时间</span> <span ng-show=\"sortField == 'dueDate'\">到期时间</span> <span ng-show=\"sortField == 'visits'\">访问次数</span> <span ng-show=\"sortField == 'status'\">状态</span></button> <button type=button class=\"btn btn-md btn-default dropdown-toggle\" dropdown-toggle><span class=caret></span></button><ul class=dropdown-menu role=menu style=\"left: inherit; right: 0px\"><li><a href ng-click=\"changeSort('name')\">名称</a></li><li><a href ng-click=\"changeSort('shareDate')\">分享时间</a></li><li><a href ng-click=\"changeSort('dueDate')\">到期时间</a></li><li><a href ng-click=\"changeSort('visits')\">访问次数</a></li><li><a href ng-click=\"changeSort('status')\">状态</a></li></ul></div></div></div></div><div class=\"row wrapper-xs bg-light lter\"><div class=\"col-sm-10 col-xs-10 padder-sm\"><button class=\"btn btn-md btn-default\" ng-click=openParent(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type != 'directory'\"><i class=\"glyphicon glyphicon-new-window\"></i> 打开所在文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=open(selection[0],$event) ng-show=\"selection.length == 1 && selection[0].type == 'directory'\"><i class=\"fa fa-folder-open\"></i> 打开文件夹</button> <button class=\"btn btn-md btn-default\" ng-click=remove() ng-show=\"selection.length > 0\"><i class=\"fa fa-trash\"></i> 删除分享</button></div><div class=\"col-sm-2 col-xs-2 text-right padder-sm\"><div class=\"input-group-icon directory-search\"><i class=\"glyphicon glyphicon-search input-icon\"></i> <input ng-model=condition class=\"form-control input-sm rounded\" placeholder='搜索\"我的分享\"'></div></div></div></div><div class=\"bg-light lter app-inner\" ng-click=onContainerClick();><div class=\"table-responsive file-list\" ng-if=\"mode== 'list'\" ng-show=\"shares.length > 0 && !loading\"><table class=\"table b-b b-light lter file-table\"><thead><tr><th width=5%><label class=\"i-checks i-checks-sm m-b-none\" ng-show=!condition><input type=checkbox ng-click=selecteAll() ng-checked=isSelectAll><i></i></label></th><th ng-click=\"changeSort('name')\" width=30%>名称 <i ng-show=\"sortField == 'name'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('shareDate')\" width=15%>分享时间 <i ng-show=\"sortField == 'shareDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('dueDate')\" width=15%>到期时间 <i ng-show=\"sortField == 'dueDate'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('visits')\" width=10%>访问次数 <i ng-show=\"sortField == 'visits'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th ng-click=\"changeSort('status')\" width=10%>状态 <i ng-show=\"sortField == 'status'\" ng-class=\"{'fa-caret-up' : !sortDesc,'fa-caret-down':sortDesc}\" class=fa></i></th><th width=20%>备注</th></tr></thead><tbody><tr ng-repeat=\"file in shares|orderBy:sortFields:sortDesc | filter:{name:condition}\" class=\"file-item hc-item\" ng-class=\"{true:'active'}[file.selected]\" valign=middle ng-click=select(file)><td width=5%><label class=\"i-checks i-checks-sm m-b-none\"><input type=checkbox ng-checked=file.selected ng-click=select(file);><i></i></label></td><td class=text-ellipsis><a ng-click=open(file,$event); ng-class=\"{'text-muted':file.status == 1}\"><div class=file-icon-wrapper><img class=file-icon ng-src={{getIcon(file)}}></div>{{file.name}}</a></td><td>{{file.shareDate}}</td><td>{{file.dueDate}}</td><td>{{file.visits}}</td><td>{{file.status | translate:'share.status'}}</td><td>{{file.note}}</td></tr></tbody></table></div><div class=\"wrapper-xl text-center\" ng-show=loading><img ng-src=\"{{'asset/img/loading.gif' | resource}}\"><p class=m-t-sm>正在加载</p></div><div class=\"wrapper-xl text-center\" ng-show=\"(shares.length == 0 || !files) && !loading\"><img ng-src=\"{{'asset/img/empty.png' | resource}}\"><p class=m-t-md>您还没有分享文件</p></div></div></div><div class=\"wrapper-xl text-center\" ng-show=error><img ng-src=\"{{'asset/img/error.png' | resource}}\"><p class=m-t-md>加载我的分享失败：{{error}}</p></div>"
  );


  $templateCache.put('asset/tpl/tags.html',
    "<div class=m-c><div class=modal-header><h4 class=modal-title><i class=\"fa fa-tags\"></i> 设置标签 <button type=button class=close ng-click=cancel();>×</button></h4></div><div class=\"modal-body no-padder\"><div class=\"wrapper-md clearfix\" ng-show=\"tags.length > 0\"><div class=\"i-tag i-tag-close\" ng-repeat=\"tag in tags track by $index\"><span>{{tag}}</span> <a href=javascript:void(0); class=close ng-click=remove(tag)>×</a></div></div><div class=\"wrapper-md text-center\" ng-show=\"tags.length == 0\">没有设置标签</div><div class=\"wrapper-md b-t\"><form name=tagForm class=\"form-horizontal form-validation\"><div class=input-group><span class=input-group-addon>添加标签</span> <input class=form-control ng-model=tag placeholder=标签长度200个字内><div class=input-group-btn><button type=button class=\"btn btn-default\" ng-diabled=tag ng-click=add();><i class=\"glyphicon glyphicon-ok\"></i></button></div></div></form></div></div></div>"
  );

}]);
